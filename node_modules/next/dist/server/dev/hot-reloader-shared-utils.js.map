{"version":3,"sources":["../../../src/server/dev/hot-reloader-shared-utils.ts"],"sourcesContent":["import { getPathMatch } from '../../shared/lib/router/utils/path-match'\nimport { parseVersionInfo, type VersionInfo } from './parse-version-info'\n\nexport const matchNextPageBundleRequest = getPathMatch(\n  '/_next/static/chunks/pages/:path*.js(\\\\.map|)'\n)\nexport async function getVersionInfo(): Promise<VersionInfo> {\n  let installed = '0.0.0'\n\n  try {\n    installed = require('next/package.json').version\n\n    let res\n\n    try {\n      // use NPM registry regardless user using Yarn\n      res = await fetch('https://registry.npmjs.org/-/package/next/dist-tags')\n    } catch {\n      // ignore fetch errors\n    }\n\n    if (!res || !res.ok) return { installed, staleness: 'unknown' }\n\n    const { latest, canary } = await res.json()\n\n    return parseVersionInfo({ installed, latest, canary })\n  } catch (e: any) {\n    console.error(e)\n    return { installed, staleness: 'unknown' }\n  }\n}\n"],"names":["getVersionInfo","matchNextPageBundleRequest","getPathMatch","installed","require","version","res","fetch","ok","staleness","latest","canary","json","parseVersionInfo","e","console","error"],"mappings":";;;;;;;;;;;;;;;IAMsBA,cAAc;eAAdA;;IAHTC,0BAA0B;eAA1BA;;;2BAHgB;kCACsB;AAE5C,MAAMA,6BAA6BC,IAAAA,uBAAY,EACpD;AAEK,eAAeF;IACpB,IAAIG,YAAY;IAEhB,IAAI;QACFA,YAAYC,QAAQ,qBAAqBC,OAAO;QAEhD,IAAIC;QAEJ,IAAI;YACF,8CAA8C;YAC9CA,MAAM,MAAMC,MAAM;QACpB,EAAE,OAAM;QACN,sBAAsB;QACxB;QAEA,IAAI,CAACD,OAAO,CAACA,IAAIE,EAAE,EAAE,OAAO;YAAEL;YAAWM,WAAW;QAAU;QAE9D,MAAM,EAAEC,MAAM,EAAEC,MAAM,EAAE,GAAG,MAAML,IAAIM,IAAI;QAEzC,OAAOC,IAAAA,kCAAgB,EAAC;YAAEV;YAAWO;YAAQC;QAAO;IACtD,EAAE,OAAOG,GAAQ;QACfC,QAAQC,KAAK,CAACF;QACd,OAAO;YAAEX;YAAWM,WAAW;QAAU;IAC3C;AACF","ignoreList":[0]}