{"version":3,"sources":["../../../src/server/mcp/get-or-create-mcp-server.ts"],"sourcesContent":["import { McpServer } from 'next/dist/compiled/@modelcontextprotocol/sdk/server/mcp'\nimport { registerGetProjectMetadataTool } from './tools/get-project-metadata'\nimport { registerGetErrorsTool } from './tools/get-errors'\nimport { registerGetPageMetadataTool } from './tools/get-page-metadata'\nimport { registerGetLogsTool } from './tools/get-logs'\nimport { registerGetActionByIdTool } from './tools/get-server-action-by-id'\nimport type { HmrMessageSentToBrowser } from '../dev/hot-reloader-types'\n\nexport interface McpServerOptions {\n  projectPath: string\n  distDir: string\n  sendHmrMessage: (message: HmrMessageSentToBrowser) => void\n  getActiveConnectionCount: () => number\n  getDevServerUrl: () => string | undefined\n}\n\nlet mcpServer: McpServer | undefined\n\nexport const getOrCreateMcpServer = (options: McpServerOptions) => {\n  if (mcpServer) {\n    return mcpServer\n  }\n\n  mcpServer = new McpServer({\n    name: 'Next.js MCP Server',\n    version: '0.1.0',\n  })\n\n  registerGetProjectMetadataTool(\n    mcpServer,\n    options.projectPath,\n    options.getDevServerUrl\n  )\n  registerGetErrorsTool(\n    mcpServer,\n    options.sendHmrMessage,\n    options.getActiveConnectionCount\n  )\n  registerGetPageMetadataTool(\n    mcpServer,\n    options.sendHmrMessage,\n    options.getActiveConnectionCount\n  )\n  registerGetLogsTool(mcpServer, options.distDir)\n  registerGetActionByIdTool(mcpServer, options.distDir)\n\n  return mcpServer\n}\n"],"names":["getOrCreateMcpServer","mcpServer","options","McpServer","name","version","registerGetProjectMetadataTool","projectPath","getDevServerUrl","registerGetErrorsTool","sendHmrMessage","getActiveConnectionCount","registerGetPageMetadataTool","registerGetLogsTool","distDir","registerGetActionByIdTool"],"mappings":";;;;+BAkBaA;;;eAAAA;;;qBAlBa;oCACqB;2BACT;iCACM;yBACR;qCACM;AAW1C,IAAIC;AAEG,MAAMD,uBAAuB,CAACE;IACnC,IAAID,WAAW;QACb,OAAOA;IACT;IAEAA,YAAY,IAAIE,cAAS,CAAC;QACxBC,MAAM;QACNC,SAAS;IACX;IAEAC,IAAAA,kDAA8B,EAC5BL,WACAC,QAAQK,WAAW,EACnBL,QAAQM,eAAe;IAEzBC,IAAAA,gCAAqB,EACnBR,WACAC,QAAQQ,cAAc,EACtBR,QAAQS,wBAAwB;IAElCC,IAAAA,4CAA2B,EACzBX,WACAC,QAAQQ,cAAc,EACtBR,QAAQS,wBAAwB;IAElCE,IAAAA,4BAAmB,EAACZ,WAAWC,QAAQY,OAAO;IAC9CC,IAAAA,8CAAyB,EAACd,WAAWC,QAAQY,OAAO;IAEpD,OAAOb;AACT","ignoreList":[0]}