{"version":3,"sources":["../../../src/lib/fs/write-atomic.ts"],"sourcesContent":["import { unlinkSync, writeFileSync } from 'fs'\nimport { renameSync } from './rename'\n\nexport function writeFileAtomic(filePath: string, content: string): void {\n  const tempPath = filePath + '.tmp.' + Math.random().toString(36).slice(2)\n  try {\n    writeFileSync(tempPath, content, 'utf-8')\n    renameSync(tempPath, filePath)\n  } catch (e) {\n    try {\n      unlinkSync(tempPath)\n    } catch {\n      // ignore\n    }\n    throw e\n  }\n}\n"],"names":["writeFileAtomic","filePath","content","tempPath","Math","random","toString","slice","writeFileSync","renameSync","e","unlinkSync"],"mappings":";;;;+BAGgBA;;;eAAAA;;;oBAH0B;wBACf;AAEpB,SAASA,gBAAgBC,QAAgB,EAAEC,OAAe;IAC/D,MAAMC,WAAWF,WAAW,UAAUG,KAAKC,MAAM,GAAGC,QAAQ,CAAC,IAAIC,KAAK,CAAC;IACvE,IAAI;QACFC,IAAAA,iBAAa,EAACL,UAAUD,SAAS;QACjCO,IAAAA,kBAAU,EAACN,UAAUF;IACvB,EAAE,OAAOS,GAAG;QACV,IAAI;YACFC,IAAAA,cAAU,EAACR;QACb,EAAE,OAAM;QACN,SAAS;QACX;QACA,MAAMO;IACR;AACF","ignoreList":[0]}