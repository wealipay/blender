{"version":3,"sources":["../../../src/lib/fs/write-atomic.ts"],"sourcesContent":["import { unlinkSync, writeFileSync } from 'fs'\nimport { renameSync } from './rename'\n\nexport function writeFileAtomic(filePath: string, content: string): void {\n  const tempPath = filePath + '.tmp.' + Math.random().toString(36).slice(2)\n  try {\n    writeFileSync(tempPath, content, 'utf-8')\n    renameSync(tempPath, filePath)\n  } catch (e) {\n    try {\n      unlinkSync(tempPath)\n    } catch {\n      // ignore\n    }\n    throw e\n  }\n}\n"],"names":["unlinkSync","writeFileSync","renameSync","writeFileAtomic","filePath","content","tempPath","Math","random","toString","slice","e"],"mappings":"AAAA,SAASA,UAAU,EAAEC,aAAa,QAAQ,KAAI;AAC9C,SAASC,UAAU,QAAQ,WAAU;AAErC,OAAO,SAASC,gBAAgBC,QAAgB,EAAEC,OAAe;IAC/D,MAAMC,WAAWF,WAAW,UAAUG,KAAKC,MAAM,GAAGC,QAAQ,CAAC,IAAIC,KAAK,CAAC;IACvE,IAAI;QACFT,cAAcK,UAAUD,SAAS;QACjCH,WAAWI,UAAUF;IACvB,EAAE,OAAOO,GAAG;QACV,IAAI;YACFX,WAAWM;QACb,EAAE,OAAM;QACN,SAAS;QACX;QACA,MAAMK;IACR;AACF","ignoreList":[0]}